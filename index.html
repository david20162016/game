<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <title>Teachable Machine Pose Model</title>
  <link rel="stylesheet" href="./css/style.css" />
</head>

<body>
  <h1>Circle Survivor</h1>
  <div id="instructions">
    <h3>Instructions</h3>
    <ul>
      <li><span class="key">W</span><span class="key">A</span><span class="key">S</span><span class="key">D</span>
        &nbsp; Move Circle</li>
      <li><span class="key">E</span> &nbsp; Shield | <span class="key">Q</span> &nbsp; Slower | <span
          class="key">R</span> &nbsp; Shrink</li>
      <li><span class="key">Shift</span> &nbsp; Turbo | <span class="key">F</span> &nbsp; Bomb | <span
          class="key">G</span> &nbsp; Ghost</li>
      <li><span class="key">M</span> &nbsp; Magnet | <span class="key">V</span> &nbsp; x2 Coin | <span
          class="key">X</span> &nbsp; Decoy</li>
    </ul>
    <p>1 Coin = 10 Store Credits!</p>
  </div>

  <div class="button-container">
    <button type="button" id="startBtn" onclick="init()">Start Game</button>
    <button type="button" id="stopBtn" onclick="gameEngine.gameOver()" disabled>Finish</button>
    <button type="button" id="shopBtn" onclick="gameEngine.toggleStore(true)">Store</button>
    <button type="button" id="muteBtn" onclick="gameEngine.toggleMute()">ðŸ”Š Sound On</button>
  </div>

  <div id="active-items"></div>

  <div class="game-container">
    <div id="info-panel">
      <div id="score-board">Time: <span id="time-score">0.0</span>s</div>
      <div id="coin-board">Coins: <span id="store-coins">0</span></div>
    </div>
    <div class="canvas-wrapper">
      <canvas id="canvas"></canvas>
    </div>
  </div>

  <!-- Store Modal -->
  <div id="store-modal" class="hidden">
    <div class="modal-content">
      <h2>Game Store</h2>
      <p>Your Balance: <span id="modal-coins" style="color: #ffd700; font-weight: bold;">0</span> Coins</p>

      <div class="shop-items">
        <div class="shop-item">
          <div class="item-info"><b style="color: #00ffff;">Shield (E)</b><span>5s Invincibility</span></div>
          <button type="button" class="buy-btn" onclick="gameEngine.buyItem('shield')">20 ðŸª™</button>
        </div>
        <div class="shop-item">
          <div class="item-info"><b style="color: #ff00ff;">Revive Potion</b><span>Restart from death</span></div>
          <button type="button" class="buy-btn" onclick="gameEngine.buyItem('potion')">40 ðŸª™</button>
        </div>
        <div class="shop-item">
          <div class="item-info"><b style="color: #00ff00;">Time Slower (Q)</b><span>8s - 50% Villain Speed</span></div>
          <button type="button" class="buy-btn" onclick="gameEngine.buyItem('timer')">30 ðŸª™</button>
        </div>
        <div class="shop-item">
          <div class="item-info"><b style="color: #ff8800;">Shrink Potion (R)</b><span>10s - 50% Size</span></div>
          <button type="button" class="buy-btn" onclick="gameEngine.buyItem('shrink')">25 ðŸª™</button>
        </div>
        <div class="shop-item">
          <div class="item-info"><b style="color: #66ccff;">Turbo Boosters (Shift)</b><span>10s - +40% Speed</span>
          </div>
          <button type="button" class="buy-btn" onclick="gameEngine.buyItem('turbo')">20 ðŸª™</button>
        </div>
        <div class="shop-item">
          <div class="item-info"><b style="color: #ff3333;">Flash Bomb (F)</b><span>Clear all Villains</span></div>
          <button type="button" class="buy-btn" onclick="gameEngine.buyItem('bomb')">50 ðŸª™</button>
        </div>
        <div class="shop-item">
          <div class="item-info"><b style="color: #ffffff;">Ghost Cape (G)</b><span>3s - Phase through enemies</span>
          </div>
          <button type="button" class="buy-btn" onclick="gameEngine.buyItem('ghost')">45 ðŸª™</button>
        </div>
        <div class="shop-item">
          <div class="item-info"><b style="color: #ffd700;">Coin Magnet (M)</b><span>15s - Attract Coins</span></div>
          <button type="button" class="buy-btn" onclick="gameEngine.buyItem('magnet')">35 ðŸª™</button>
        </div>
        <div class="shop-item">
          <div class="item-info"><b style="color: #ffff00;">Double Value (V)</b><span>20s - Coins x2 (20c)</span></div>
          <button type="button" class="buy-btn" onclick="gameEngine.buyItem('double')">40 ðŸª™</button>
        </div>
        <div class="shop-item">
          <div class="item-info"><b style="color: #00ffaa;">Lucky Clover</b><span>Pass - +30% Coin spawn</span></div>
          <button type="button" class="buy-btn" onclick="gameEngine.buyItem('clover')">60 ðŸª™</button>
        </div>
        <div class="shop-item">
          <div class="item-info"><b style="color: #ffaa00;">Decoy Doll (X)</b><span>5s - Villains target decoy</span>
          </div>
          <button type="button" class="buy-btn" onclick="gameEngine.buyItem('decoy')">35 ðŸª™</button>
        </div>
      </div>

      <button type="button" onclick="gameEngine.toggleStore(false)">Back to Game</button>
    </div>
  </div>

  <!-- Game Over Overlay -->
  <div id="game-over-overlay" class="hidden">
    <div class="overlay-content">
      <div id="revive-section" class="hidden">
        <h2>Revive?</h2>
        <p>Do you want to use your revival potion?</p>
        <button type="button" onclick="gameEngine.confirmRevive(true)">Yes, Revive! (ðŸ§ª-1)</button>
        <button type="button" onclick="gameEngine.confirmRevive(false)">No, Finish</button>
      </div>

      <div id="name-section" class="hidden">
        <h2>Game Over</h2>
        <p>Survival Time: <span id="final-score">0.0</span>s</p>
        <input type="text" id="player-name" placeholder="Enter your name" maxlength="10">
        <button type="button" id="submit-score-btn">Submit Score</button>
        <button type="button" id="restart-btn" onclick="init()">Play Again</button>
      </div>
    </div>
  </div>

  <!-- Leaderboard UI -->
  <div id="leaderboard">
    <h3>Top Survivors</h3>
    <ul id="leaderboard-list">
      <li>No scores yet</li>
    </ul>
  </div>

  <div id="label-container"></div>

  <!-- Teachable Machine ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@1.3.1/dist/tf.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/pose@0.8/dist/teachablemachine-pose.min.js"></script>

  <!-- ì• í”Œë¦¬ì¼€ì´ì…˜ ëª¨ë“ˆ -->
  <script src="./js/audioManager.js"></script>
  <script src="./js/stabilizer.js"></script>
  <script src="./js/poseEngine.js"></script>
  <script src="./js/gameEngine.js"></script>
  <script src="./js/main.js"></script>
</body>

</html>